# API Reference

This document describes the FastAPI endpoints provided by `api.server`.

## `POST /generate_video`

Queues a video generation request.

**Version:** v1  
**Schema:** [schemas/openapi.json](schemas/openapi.json) (`#/paths/~1generate_video/post`)

**Request Body**

```json
{
  "prompt": "Text describing the desired video"
}
```

**Response**

```json
{
  "status": "queued",
  "prompt": "Text describing the desired video"
}
```

## `WS /stream_avatar`

WebSocket channel used for real-time avatar updates. Clients send text
messages representing avatar states. Each message is broadcast to all
connected clients.

**Version:** v1  
**Schema:** [schemas/stream_avatar_message.schema.json](schemas/stream_avatar_message.schema.json)

## `GET /styles`

Returns the list of available style configuration names.

**Version:** v1  
**Schema:** [schemas/openapi.json](schemas/openapi.json) (`#/paths/~1styles/get`)

**Response**

```json
{
  "styles": ["style_name", "..."]
}
```

These schemas align with the OpenAPI specification generated by FastAPI.

## Testing

Automated tests cover critical endpoints to ensure they remain stable. The
`/health` and `/glm-command` routes are exercised in
[`tests/test_server_endpoints.py`](../tests/test_server_endpoints.py).
